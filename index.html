<!DOCTYPE html>
<html lang="fr">
<head>
  <title>CookZen</title>
  <style>
    body { margin: 0; }

    .footer {
      position: fixed;
      top: 0; left: 0; width: 100%;
      background: #db3131;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 75px;
      box-sizing: border-box;
      font-size: 60px;
    }

    .barre {
      position: fixed;
      top: 215px; left: 0;
      width: 100%; height: 10px;
      background: black;
    }

    .contenu {
      margin-top: 230px;
      padding: 20px;
      font-size: 40px;
    }

    .discord-zone {
      position: absolute;
      top: 10px;
      right: 20px;
      text-align: center;
    }

    .discord-zone img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: none;
      box-shadow: none;
      display: block;
      margin: 0 auto;
    }

    .discord-zone span {
      display: block;
      margin-top: 10px;
      font-size: 22px;
      color: white;
      text-align: center;
    }

    .button-container {
      margin-top: 40px;
    }

    .button-container button {
      font-size: 24px;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      background-color: #db3131;
      color: white;
      cursor: pointer;
    }

    .button-container button:hover {
      background-color: #b42828;
    }
  </style>
</head>
<body>

  <div class="footer">
    CookZen

    <div id="discord-zone" class="discord-zone">
      <!-- Logo Discord par d√©faut -->
      <a id="login-btn" href="#">
        <img src="https://cdn-icons-png.flaticon.com/512/2111/2111370.png" alt="Logo Discord">
      </a>
    </div>
  </div>

  <div class="barre"></div>

  <div class="contenu">
    <p>Contenu de la page</p>
    <div class="button-container">
      <button onclick="window.location.href='pain.html'">üçû Pain sans gluten</button>
      <button onclick="window.location.href='pizza.html'">üçï P√¢te √† pizza sans gluten</button>
      <button onclick="window.location.href='cookie.html'">üç™ Cookies sans gluten</button>
    </div>
  </div>

  <script>
    const CLIENT_ID = '1387928652041162892';
    const REDIRECT_URI = 'https://usagi84karasu.github.io/CookZen.github.io/';
    const AUTH_URL = `https://discord.com/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=identify`;

    const loginBtn = document.getElementById('login-btn');
    const discordZone = document.getElementById('discord-zone');
    loginBtn.href = AUTH_URL;

    function getToken() {
      const hash = window.location.hash;
      if (hash.includes('access_token')) {
        return new URLSearchParams(hash.substring(1)).get('access_token');
      }
      return null;
    }

    const token = getToken();

    if (token) {
      loginBtn.style.display = 'none';

      fetch('https://discord.com/api/users/@me', {
        headers: { Authorization: `Bearer ${token}` }
      })
      .then(r => r.json())
      .then(user => {
        const username = user.username;
        const avatarURL = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;

        // Affiche avatar + pseudo (centr√© et en gros)
        discordZone.innerHTML = `
          <img src="${avatarURL}" alt="Avatar Discord">
          <span>${username}</span>
        `;
      });
    }
  </script>

</body>
</html>
